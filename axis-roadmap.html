<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AxIs – Progress Path Board</title>
  <link rel="icon" type="image/svg+xml" href="./logo-variants/axis-favico        later: {
        title: 'Later',
        items: [
          { id: 'teams-unfurl', title: 'Teams link unfurl + message extension', tags: ['Teams'], status: 'planned', milestone: 'v11' },
          { id: 'teams-tab', title: 'Teams Tab + SSO', tags: ['Teams'], status: 'planned', milestone: 'v11' },
          { id: 'excel-link', title: 'Quantity link / Excel sync', tags: ['Export'], status: 'planned', milestone: 'v11' },
          { id: 'auto-cal', title: 'AI auto-calibrate from title block/scale bar', tags: ['AI'], status: 'planned', milestone: 'v11' },
          { id: 'adv-annot', title: 'Advanced annotations (callouts, notes, shapes)', tags: ['PDF Engine'], status: 'planned', milestone: 'v11' },
          { id: 'openai-integration', title: 'OpenAI API integration for AI tool generation', tags: ['AI'], status: 'planned', milestone: 'v11' },
          { id: 'local-storage', title: 'Local file storage system with folder tree + cloud sync', tags: ['Storage'], status: 'planned', milestone: 'v11' },
        ]
      } <style>
    :root {
      --bg: #0c0a09;
      --surface: #0a1a2f;
      --panel: #0f172a;
      --panel-2: #0b1220;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --primary: #f97316;
      --success: #22c55e;
      --warning: #eab308;
      --danger: #ef4444;
      --border: #1f2937;
      --radius: 14px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 600px at 20% 20%, var(--panel-2), var(--bg));
      color: var(--text);
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Inter, system-ui, Arial;
    }
    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .topbar {
      position: sticky; top: 0; z-index: 20;
      display: flex; align-items: center; gap: 12px;
      padding: 10px 16px;
      background: linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,0));
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(8px);
    }
    .logo { display:flex; align-items:center; gap:10px; }
    .logo img { width: 32px; height: 32px; border-radius: 8px; }
    .logo span { font-weight: 900; letter-spacing: .6px; }
    .wrap { padding: 14px; display: grid; gap: 16px; }

    /* FLOW STAGE */
    .flow {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .stage-title { font-weight: 800; letter-spacing: .4px; margin-bottom: 10px; }
    .flow-inner {
      position: relative;
      overflow-x: auto;
      padding-bottom: 12px;
    }
    .lane {
      display: flex; align-items: stretch; gap: 28px; padding: 8px 6px 18px 6px;
      min-width: 980px;
    }
    .node {
      position: relative;
      min-width: 200px;
      display: grid; gap: 6px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      box-shadow: var(--shadow);
      cursor: default;
    }
    .node .title { font-weight: 800; }
    .node .desc { color: var(--muted); font-size: 13px; }
    .badge {
      position: absolute; top: -10px; right: -10px;
      font-size: 11px; font-weight: 800;
      background: var(--primary); color: #0a1a2f; border-radius: 999px;
      padding: 4px 8px; border: 1px solid rgba(0,0,0,.35);
    }
    .badge.done { background: var(--success); color: #07130a; }
    .badge.progress { background: var(--warning); color: #1f1702; }
    .badge.planned { background: var(--muted); color: #0a1a2f; }

    .arrow {
      position: relative; width: 32px; display: grid; place-items: center;
    }
    .arrow::after {
      content: "➔"; font-size: 18px; color: var(--muted);
    }

    /* BOARD */
    .board {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;
    }
    .col {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      display: grid; grid-template-rows: auto 1fr;
    }
    .col header {
      display: flex; align-items: center; justify-content: space-between; gap: 8px;
      padding: 10px 12px; border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, var(--panel-2), transparent);
    }
    .col header .h { font-weight: 900; letter-spacing: .4px; }
    .count { font-size: 12px; color: var(--muted); }
    .cards { padding: 10px; display: grid; gap: 10px; align-content: start; }
    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px;
      display: grid; gap: 6px;
      cursor: pointer;
    }
    .card:hover { border-color: var(--primary); }
    .card .title { font-weight: 700; }
    .meta { display: flex; align-items: center; gap: 8px; color: var(--muted); font-size: 12px; }
    .pill { font-size: 11px; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--border); background: var(--panel-2); }
    .pill.dep { border-style: dashed; }
    .pill.blocked { border-color: var(--danger); color: #fecaca; }
    .pill.done { border-color: var(--success); color: #bbf7d0; }

    /* MILESTONES */
    .milestones {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      display: grid; gap: 12px;
    }
    .bar { height: 10px; background: #0d2238; border: 1px solid var(--border); border-radius: 999px; overflow: hidden; }
    .bar > div { height: 100%; background: linear-gradient(90deg, var(--primary), #fbbf24); width: 0%; transition: width .4s ease; }

    .legend { display: flex; gap: 10px; flex-wrap: wrap; color: var(--muted); font-size: 13px; }
    .legend .item { display: inline-flex; align-items: center; gap: 6px; }
    .dot { width: 10px; height: 10px; border-radius: 999px; display: inline-block; }
    .dot.done { background: var(--success); }
    .dot.progress { background: var(--warning); }
    .dot.planned { background: var(--muted); }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="logo">
      <img src="./logo-variants/axis-logo-mark.svg" alt="AxIs"/>
      <span>AxIs Progress Path Board</span>
    </div>
    <div style="margin-left:auto; color:var(--muted); font-size:13px;">
      Click cards to toggle completion. Your changes save locally in this file (localStorage).
    </div>
  </div>

  <div class="wrap">
    <!-- FLOW DIAGRAM -->
    <section class="flow">
      <div class="stage-title">Program Flow (end-to-end)</div>
      <div class="flow-inner">
        <div class="lane" id="flow-lane">
          <!-- Nodes will be injected here -->
        </div>
      </div>
      <div class="legend" style="margin-top:8px;">
        <div class="item"><span class="dot done"></span> Done</div>
        <div class="item"><span class="dot progress"></span> In Progress</div>
        <div class="item"><span class="dot planned"></span> Planned</div>
      </div>
    </section>

    <!-- PROGRESS BOARD -->
    <section class="board" id="board">
      <!-- Columns will be injected -->
    </section>

    <!-- MILESTONES -->
    <section class="milestones">
      <div style="display:flex; align-items:center; gap:10px;">
        <div class="stage-title" style="margin:0;">Milestones</div>
        <div class="legend" style="margin-left:auto;">
          <div class="item">Based on completed items in each milestone bucket</div>
        </div>
      </div>

      <div>
        <div class="meta" style="justify-content:space-between;">
          <div><strong>MVP</strong> – Bluebeam-core viewer + markups, calibration, Dynamic Fill, RFI gen, Teams webhook</div>
          <div id="mvp-pct">0%</div>
        </div>
        <div class="bar"><div id="mvp-bar"></div></div>
      </div>

      <div>
        <div class="meta" style="justify-content:space-between;">
          <div><strong>v1.0</strong> – Compare/Overlay + Slip-sheet + Batch Link + Session Record + Dashboard polish</div>
          <div id="v1-pct">0%</div>
        </div>
        <div class="bar"><div id="v1-bar"></div></div>
      </div>

      <div>
        <div class="meta" style="justify-content:space-between;">
          <div><strong>v1.1</strong> – Teams unfurling + SSO Tab + Excel link, AI auto-calibrate, advanced annotations</div>
          <div id="v11-pct">0%</div>
        </div>
        <div class="bar"><div id="v11-bar"></div></div>
      </div>
    </section>
  </div>

  <script>
    // ------- DATA MODEL -------
    const flow = [
      { id: 'intake', title: 'PDF Intake', desc: 'Upload drawings / docs', status: 'done' },
      { id: 'extract', title: 'AI Extract', desc: 'Text · OCR · Symbols · Summary', status: 'done' },
      { id: 'viewer', title: 'Viewer + Markups', desc: 'Render + overlay tools', status: 'progress' },
      { id: 'measure', title: 'Calibration + Measure', desc: 'Scale, units, Dynamic Fill', status: 'planned' },
      { id: 'compare', title: 'Compare / Overlay', desc: 'Visual diff + Change Explain', status: 'planned' },
      { id: 'slipsheet', title: 'Slip-sheet + Batch Link', desc: 'Replace pages, preserve markups; auto links', status: 'planned' },
      { id: 'rfi', title: 'RFI / Punch Generator', desc: 'PDF + Email + Assign', status: 'progress' },
      { id: 'export', title: 'Export', desc: 'CSV / PDF / JSON summaries', status: 'progress' },
      { id: 'teams', title: 'Teams Notify', desc: 'Webhook + Adaptive Card', status: 'planned' },
      { id: 'dash', title: 'Dashboard + Reminders', desc: 'Cards, calendar, AI prompts', status: 'progress' }
    ];

    const board = {
      now: {
        title: 'Now',
        items: [
          { id: 'vw-core', title: 'PDF viewer core + overlays', tags: ['PDF Engine'], status: 'progress', milestone: 'mvp' },
          { id: 'calibration', title: 'Calibration + units + guardrails', tags: ['Measurement'], status: 'planned', milestone: 'mvp', deps: ['vw-core'] },
          { id: 'dyn-fill', title: 'Dynamic Fill (region grow)', tags: ['Measurement'], status: 'planned', milestone: 'mvp', deps: ['calibration'] },
          { id: 'rfi-rework', title: 'RFI flow: PDF gen + Supabase + email', tags: ['RFI'], status: 'progress', milestone: 'mvp' },
          { id: 'teams-webhook', title: 'Teams webhook + Adaptive Card for RFI', tags: ['Teams'], status: 'planned', milestone: 'mvp', deps: ['rfi-rework'] },
          { id: 'markups-list', title: 'Markups List + CSV/PDF export', tags: ['PDF Engine'], status: 'planned', milestone: 'mvp', deps: ['vw-core'] },
          { id: 'placeholder-cleanup', title: 'Placeholder/Stub/Mock elimination (PH-016, PH-017 done)', tags: ['Code Quality'], status: 'progress', milestone: 'mvp' },
          { id: 'toolbox-service', title: 'Toolbox service integration + SVG parameter detection', tags: ['Toolbox'], status: 'done', milestone: 'mvp' },
        ]
      },
      next: {
        title: 'Next',
        items: [
          { id: 'compare-overlay', title: 'Compare/Overlay + Change Explain', tags: ['Diff'], status: 'planned', milestone: 'v1', deps: ['vw-core'] },
          { id: 'slip-batch', title: 'Slip-sheet + Batch Link + Sets', tags: ['Revisioning'], status: 'planned', milestone: 'v1', deps: ['vw-core'] },
          { id: 'session-record', title: 'Live Session + activity export', tags: ['Collab'], status: 'planned', milestone: 'v1', deps: [] },
          { id: 'dash-polish', title: 'Dashboard polish: info/weather/status cards', tags: ['UI'], status: 'progress', milestone: 'v1' },
        ]
      },
      later: {
        title: 'Later',
        items: [
          { id: 'teams-unfurl', title: 'Teams link unfurl + message extension', tags: ['Teams'], status: 'planned', milestone: 'v11' },
          { id: 'teams-tab', title: 'Teams Tab + SSO', tags: ['Teams'], status: 'planned', milestone: 'v11' },
          { id: 'excel-link', title: 'Quantity link / Excel sync', tags: ['Export'], status: 'planned', milestone: 'v11' },
          { id: 'auto-cal', title: 'AI auto-calibrate from title block/scale bar', tags: ['AI'], status: 'planned', milestone: 'v11' },
          { id: 'adv-annot', title: 'Advanced annotations (callouts, notes, shapes)', tags: ['PDF Engine'], status: 'planned', milestone: 'v11' },
        ]
      }
    };

    // Restore saved state
    const saved = JSON.parse(localStorage.getItem('axis_board_state') || '{}');
    function getStatus(id, fallback) {
      return saved[id] || fallback;
    }

    // ------- FLOW RENDER -------
    const lane = document.getElementById('flow-lane');
    lane.innerHTML = '';
    flow.forEach((n, i) => {
      // node
      const node = document.createElement('div');
      node.className = 'node';
      node.innerHTML = `
        <div class="badge ${n.status}">${n.status === 'done' ? 'Done' : n.status === 'progress' ? 'In Progress' : 'Planned'}</div>
        <div class="title">${n.title}</div>
        <div class="desc">${n.desc}</div>
      `;
      lane.appendChild(node);

      if (i < flow.length - 1) {
        const arrow = document.createElement('div');
        arrow.className = 'arrow';
        lane.appendChild(arrow);
      }
    });

    // ------- BOARD RENDER -------
    const boardEl = document.getElementById('board');
    function renderBoard() {
      boardEl.innerHTML = '';
      Object.entries(board).forEach(([key, col]) => {
        const colEl = document.createElement('div');
        colEl.className = 'col';
        const items = col.items.map(it => ({ ...it, status: getStatus(it.id, it.status) }));
        const doneCount = items.filter(x => x.status === 'done').length;
        const total = items.length;
        colEl.innerHTML = `
          <header>
            <div class="h">${col.title}</div>
            <div class="count">${doneCount}/${total} done</div>
          </header>
          <div class="cards"></div>
        `;
        const cards = colEl.querySelector('.cards');
        items.forEach(it => {
          const c = document.createElement('div');
          c.className = 'card';
          c.dataset.id = it.id;
          const depHtml = (it.deps && it.deps.length)
            ? it.deps.map(d => `<span class="pill dep" title="Depends on ${d}">dep:${d}</span>`).join(' ')
            : '';
          const stPill = it.status === 'done' ? '<span class="pill done">done</span>'
                        : it.status === 'progress' ? '<span class="pill">in‑progress</span>'
                        : '<span class="pill">planned</span>';
          c.innerHTML = `
            <div class="title">${it.title}</div>
            <div class="meta">
              ${stPill}
              <span class="pill">${it.tags[0]}</span>
              ${depHtml}
              <span class="pill">milestone: ${it.milestone}</span>
            </div>
          `;
          c.addEventListener('click', () => {
            // toggle status: planned -> progress -> done -> planned
            const cycle = { 'planned': 'progress', 'progress': 'done', 'done': 'planned' };
            const next = cycle[getStatus(it.id, it.status)];
            saved[it.id] = next;
            localStorage.setItem('axis_board_state', JSON.stringify(saved));
            renderBoard();
            updateMilestones();
          });
          cards.appendChild(c);
        });
        boardEl.appendChild(colEl);
      });
    }

    // ------- MILESTONES -------
    function updateMilestones() {
      const all = [];
      Object.values(board).forEach(col => col.items.forEach(it => all.push({ ...it, status: getStatus(it.id, it.status) })));
      const buckets = {
        mvp: all.filter(x => x.milestone === 'mvp'),
        v1:  all.filter(x => x.milestone === 'v1'),
        v11: all.filter(x => x.milestone === 'v11')
      };
      const mvpDone = buckets.mvp.filter(x => x.status === 'done').length;
      const v1Done  = buckets.v1.filter(x => x.status === 'done').length;
      const v11Done = buckets.v11.filter(x => x.status === 'done').length;
      const mvpPct = Math.round(100 * mvpDone / Math.max(1, buckets.mvp.length));
      const v1Pct  = Math.round(100 * v1Done  / Math.max(1, buckets.v1.length));
      const v11Pct = Math.round(100 * v11Done / Math.max(1, buckets.v11.length));
      document.getElementById('mvp-bar').style.width = mvpPct + '%';
      document.getElementById('v1-bar').style.width  = v1Pct + '%';
      document.getElementById('v11-bar').style.width = v11Pct + '%';
      document.getElementById('mvp-pct').textContent = mvpPct + '%';
      document.getElementById('v1-pct').textContent  = v1Pct + '%';
      document.getElementById('v11-pct').textContent = v11Pct + '%';
    }

    renderBoard();
    updateMilestones();
  </script>
</body>
</html>
